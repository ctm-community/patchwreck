tag @s add sw.has_advancement
execute at @s anchored eyes facing entity @e[sort=nearest,limit=1,type=!player] eyes anchored feet positioned ^ ^ ^1 rotated as @s positioned ^ ^ ^-1 if entity @s[distance=..0.2] unless data entity @e[type=!player,sort=nearest,limit=1] ActiveEffects[{Id:31}] run scoreboard players add @e[type=!player,sort=nearest,limit=1] sw.targeted 1
execute as @e[scores={sw.targeted=1..}] at @s run scoreboard players operation @p sw.targeting = @s sw.targeted
effect give @e[scores={sw.targeted=30..}] glowing 8 0 true
effect give @e[scores={sw.targeted=30..}] bad_omen 8 2 true

title @s[scores={sw.targeting=1..30}] title ""
title @s[scores={sw.targeting=1..3}] subtitle [{"text":"Targeting ","color":"gray"},{"selector":"@e[type=!player,sort=nearest,limit=1,scores={sw.targeted=1..}]","color":"white"},{"text":" ■","color":"green"},{"text":"■■■■■■■■■","color":"red"}]
title @s[scores={sw.targeting=4..6}] subtitle [{"text":"Targeting ","color":"gray"},{"selector":"@e[type=!player,sort=nearest,limit=1,scores={sw.targeted=1..}]","color":"white"},{"text":" ■■","color":"green"},{"text":"■■■■■■■■","color":"red"}]
title @s[scores={sw.targeting=7..9}] subtitle [{"text":"Targeting ","color":"gray"},{"selector":"@e[type=!player,sort=nearest,limit=1,scores={sw.targeted=1..}]","color":"white"},{"text":" ■■■","color":"green"},{"text":"■■■■■■■","color":"red"}]
title @s[scores={sw.targeting=10..12}] subtitle [{"text":"Targeting ","color":"gray"},{"selector":"@e[type=!player,sort=nearest,limit=1,scores={sw.targeted=1..}]","color":"white"},{"text":" ■■■■","color":"green"},{"text":"■■■■■■","color":"red"}]
title @s[scores={sw.targeting=13..15}] subtitle [{"text":"Targeting ","color":"gray"},{"selector":"@e[type=!player,sort=nearest,limit=1,scores={sw.targeted=1..}]","color":"white"},{"text":" ■■■■■","color":"green"},{"text":"■■■■■","color":"red"}]
title @s[scores={sw.targeting=16..18}] subtitle [{"text":"Targeting ","color":"gray"},{"selector":"@e[type=!player,sort=nearest,limit=1,scores={sw.targeted=1..}]","color":"white"},{"text":" ■■■■■■","color":"green"},{"text":"■■■■","color":"red"}]
title @s[scores={sw.targeting=19..21}] subtitle [{"text":"Targeting ","color":"gray"},{"selector":"@e[type=!player,sort=nearest,limit=1,scores={sw.targeted=1..}]","color":"white"},{"text":" ■■■■■■■","color":"green"},{"text":"■■■","color":"red"}]
title @s[scores={sw.targeting=22..24}] subtitle [{"text":"Targeting ","color":"gray"},{"selector":"@e[type=!player,sort=nearest,limit=1,scores={sw.targeted=1..}]","color":"white"},{"text":" ■■■■■■■■","color":"green"},{"text":"■■","color":"red"}]
title @s[scores={sw.targeting=25..28}] subtitle [{"text":"Targeting ","color":"gray"},{"selector":"@e[type=!player,sort=nearest,limit=1,scores={sw.targeted=1..}]","color":"white"},{"text":" ■■■■■■■■■","color":"green"},{"text":"■","color":"red"}]
title @s[scores={sw.targeting=29..30}] subtitle [{"text":"Targeting ","color":"gray"},{"selector":"@e[type=!player,sort=nearest,limit=1,scores={sw.targeted=1..}]","color":"white"},{"text":" ■■■■■■■■■■","color":"green"}]

advancement revoke @s only spotweakness:using_spyglass