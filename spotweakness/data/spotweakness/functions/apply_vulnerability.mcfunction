tag @s add sw.has_advancement
scoreboard players set temp temp 100
scoreboard players set endfast temp 0
execute at @s anchored eyes run function spotweakness:vulnraycast


execute as @e[scores={sw.targeted=1..}] at @s run scoreboard players operation @p sw.targeting = @s sw.targeted
effect give @e[scores={sw.targeted=10..}] glowing 8 0 true
effect give @e[scores={sw.targeted=10..}] bad_omen 8 2 true

title @s times 0 20 10

title @s[scores={sw.targeting=1..10}] title ""
title @s[scores={sw.targeting=1}] subtitle [{"text":"Targeting ","color":"gray"},{"selector":"@e[type=!player,type=!arrow,type=!marker,type=!armor_stand,sort=nearest,limit=1,scores={sw.targeted=1..}]","color":"white"},{"text":" ■","color":"green"},{"text":"■■■■■■■■■","color":"red"}]
title @s[scores={sw.targeting=2}] subtitle [{"text":"Targeting ","color":"gray"},{"selector":"@e[type=!player,type=!arrow,type=!marker,type=!armor_stand,sort=nearest,limit=1,scores={sw.targeted=1..}]","color":"white"},{"text":" ■■","color":"green"},{"text":"■■■■■■■■","color":"red"}]
title @s[scores={sw.targeting=3}] subtitle [{"text":"Targeting ","color":"gray"},{"selector":"@e[type=!player,type=!arrow,type=!marker,type=!armor_stand,sort=nearest,limit=1,scores={sw.targeted=1..}]","color":"white"},{"text":" ■■■","color":"green"},{"text":"■■■■■■■","color":"red"}]
title @s[scores={sw.targeting=4}] subtitle [{"text":"Targeting ","color":"gray"},{"selector":"@e[type=!player,type=!arrow,type=!marker,type=!armor_stand,sort=nearest,limit=1,scores={sw.targeted=1..}]","color":"white"},{"text":" ■■■■","color":"green"},{"text":"■■■■■■","color":"red"}]
title @s[scores={sw.targeting=5}] subtitle [{"text":"Targeting ","color":"gray"},{"selector":"@e[type=!player,type=!arrow,type=!marker,type=!armor_stand,sort=nearest,limit=1,scores={sw.targeted=1..}]","color":"white"},{"text":" ■■■■■","color":"green"},{"text":"■■■■■","color":"red"}]
title @s[scores={sw.targeting=6}] subtitle [{"text":"Targeting ","color":"gray"},{"selector":"@e[type=!player,type=!arrow,type=!marker,type=!armor_stand,sort=nearest,limit=1,scores={sw.targeted=1..}]","color":"white"},{"text":" ■■■■■■","color":"green"},{"text":"■■■■","color":"red"}]
title @s[scores={sw.targeting=7}] subtitle [{"text":"Targeting ","color":"gray"},{"selector":"@e[type=!player,type=!arrow,type=!marker,type=!armor_stand,sort=nearest,limit=1,scores={sw.targeted=1..}]","color":"white"},{"text":" ■■■■■■■","color":"green"},{"text":"■■■","color":"red"}]
title @s[scores={sw.targeting=8}] subtitle [{"text":"Targeting ","color":"gray"},{"selector":"@e[type=!player,type=!arrow,type=!marker,type=!armor_stand,sort=nearest,limit=1,scores={sw.targeted=1..}]","color":"white"},{"text":" ■■■■■■■■","color":"green"},{"text":"■■","color":"red"}]
title @s[scores={sw.targeting=9}] subtitle [{"text":"Targeting ","color":"gray"},{"selector":"@e[type=!player,type=!arrow,type=!marker,type=!armor_stand,sort=nearest,limit=1,scores={sw.targeted=1..}]","color":"white"},{"text":" ■■■■■■■■■","color":"green"},{"text":"■","color":"red"}]
title @s[scores={sw.targeting=10}] subtitle [{"text":"Targeting ","color":"gray"},{"selector":"@e[type=!player,type=!arrow,type=!marker,type=!armor_stand,sort=nearest,limit=1,scores={sw.targeted=1..}]","color":"white"},{"text":" ■■■■■■■■■■","color":"green"}]

advancement revoke @s only spotweakness:using_spyglass

schedule function spotweakness:titlefix 3s